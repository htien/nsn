@using NSN.Common;
@using Domain = NewSocialNetwork.Domain;
@{
    Layout = "~/Views/Shared/_UserLayout.cshtml";
    Domain.User myProfile = ViewBag.MyProfile;
    Domain.User userProfile = ViewBag.UProfile;
}
@section html_head_area {@RenderSection("html_head_area", false)}
@RenderPage("~/Views/Shared/Frontend/pagelet/_apps_bar_pagelet.cshtml")
<div id="pagelet_app_content" class="UIContainer_Content">
    <div id="contentPane">
        <div id="pagelet_user_profile">
            @{
                string divProfile = "profile-" + userProfile.UserId;
            }
            <div id="@divProfile" class="UIContent_UserProfile">
                <div class="uiHeadProfile">
                    <div class="profileActions">
                        <div class="requestFriendAction">
                            @if (userProfile.UserId != myProfile.UserId)
                            {
                                bool isFriend = Globals.IsFriend(myProfile.UserId, userProfile.UserId);
                                bool isConfirming = Globals.IsConfirmingFriendRequest(myProfile.UserId, userProfile.UserId);
                                if (!isFriend && !isConfirming)
                                {
                                    <div class="guiButton guiRedButton addFriend">Add Friend</div>
                                }
                                else if (!isFriend && isConfirming)
                                {
                                    <div class="guiButton guiRedButton confirmingFriend">+1 Friend Request Sent</div>
                                }
                                else
                                {
                                    <div class="guiButton guiRedButton">Please contact administrator for request friend</div>
                                }
                            }
                        </div>
                    </div>
                    <div class="uiProfileTitle">
                        @userProfile.FullName
                    </div>
                </div>
                <div class="uiHeadCoverPhoto">
                </div>
                <div id="pagelet_profileSidebar" class="UISidebar_Profile">
                    <div class="uiProfileImageBox">
                        <div class="uiProfilePictureBox">
                            <div class="uiProfilePicture">
                                <div class="uiPicture">
                                    <img src="@Url.Content("~/static/images/avatars/" + ViewBag.UAvatarFileName)" title="" width="250" height="250" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="uiProfileInfoBox">
                        <div class="uiProfileInfo">
                            <div class="uiProfileInfoContent">
                                <div class="uiInfoContent">
                                    <div class="infoContent">
                                        <span>NSN Group: </span> <strong>@userProfile.UserGroup.Title</strong>
                                    </div>
                                    @if (userProfile.Country != null)
                                    {
                                    <div class="infoContent">
                                        <span>Live in</span> <strong>@userProfile.Country.Name</strong>
                                    </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uiBodyProfile">
                    <div class="uiBodyProfileContent">
                        @RenderBody()
                    </div>
                </div>
            </div>
        </div> @* pagelet_user_profile *@
        <div class="clearfix"></div>
    </div> @* contentPane *@
</div>